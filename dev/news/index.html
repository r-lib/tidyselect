<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • tidyselect</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="tidyselect.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyselect</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidyselect.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/syntax.html">Technical description of tidyselect</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/10/tidyselect-1-2-0/">Version 1.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/tidyselect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/r-lib/tidyselect/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="tidyselect-development-version">tidyselect (development version)<a class="anchor" aria-label="anchor" href="#tidyselect-development-version"></a></h2>
<ul><li><p><code><a href="../reference/starts_with.html">matches()</a></code> now uses <code>perl = TRUE</code> by default. This makes it more consistent with regular expressions in stringr (<a href="https://github.com/r-lib/tidyselect/issues/330" class="external-link">#330</a>).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> now fails when data has duplicate names and a character vector is provided as input (<a href="https://github.com/r-lib/tidyselect/issues/346" class="external-link">#346</a>).</p></li>
<li>
<p>New <code>args_tidy_select</code> documentation topic. Use the following tags to document tidyselect arguments in your functions:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @param ... &lt;[`tidy-select`][tidyselect::args_tidy_select]&gt; *doc*</span></span>
<span><span class="co">#' @param sel &lt;[`tidy-select`][tidyselect::args_tidy_select]&gt; *doc*</span></span></code></pre></div>
</li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> and <code><a href="../reference/eval_relocate.html">eval_relocate()</a></code> gain a new <code>error_arg</code> argument that can be specified to throw a better error message when <code>allow_empty = FALSE</code> or <code>allow_rename = FALSE</code> (<a href="https://github.com/olivroy" class="external-link">@olivroy</a>, <a href="https://github.com/r-lib/tidyselect/issues/327" class="external-link">#327</a>).</p></li>
<li><p><code><a href="../reference/vars_pull.html">vars_pull()</a></code> now also warns when using <code>.data</code> (<a href="https://github.com/r-lib/tidyselect/issues/335" class="external-link">#335</a>). Please use string-quotation programmatic usage, consistently with other tidyselect contexts.</p></li>
<li><p><code><a href="../reference/starts_with.html">num_range()</a></code> now recycles its arguments using tidyverse rules (<a href="https://github.com/r-lib/tidyselect/issues/355" class="external-link">#355</a>). In addition, it gains a <code>cross</code> argument that allows you to take the cartesian product of these arguments instead.</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> and <code><a href="../reference/eval_relocate.html">eval_relocate()</a></code> throw a classed error message when <code>allow_empty = FALSE</code> (<a href="https://github.com/olivroy" class="external-link">@olivroy</a>, <a href="https://github.com/r-lib/tidyselect/issues/347" class="external-link">#347</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.1" id="tidyselect-121">tidyselect 1.2.1<a class="anchor" aria-label="anchor" href="#tidyselect-121"></a></h2><p class="text-muted">CRAN release: 2024-03-11</p>
<ul><li><p>Performance improvements (<a href="https://github.com/r-lib/tidyselect/issues/337" class="external-link">#337</a>, <a href="https://github.com/r-lib/tidyselect/issues/338" class="external-link">#338</a>, <a href="https://github.com/r-lib/tidyselect/issues/339" class="external-link">#339</a>, <a href="https://github.com/r-lib/tidyselect/issues/341" class="external-link">#341</a>)</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> out-of-bounds errors now use the verb “select” rather than “subset” in the error message for consistency with <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code> (<a href="https://github.com/r-lib/tidyselect/issues/271" class="external-link">#271</a>).</p></li>
<li><p>Fix for CRAN checks.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0" id="tidyselect-120">tidyselect 1.2.0<a class="anchor" aria-label="anchor" href="#tidyselect-120"></a></h2><p class="text-muted">CRAN release: 2022-10-10</p>
<div class="section level3">
<h3 id="new-features-1-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-2-0"></a></h3>
<ul><li><p>New <code><a href="../reference/tidyselect_data_proxy.html">tidyselect_data_proxy()</a></code> and <code><a href="../reference/tidyselect_data_proxy.html">tidyselect_data_has_predicates()</a></code> allows tidyselect to work with custom input types (<a href="https://github.com/r-lib/tidyselect/issues/242" class="external-link">#242</a>).</p></li>
<li><p>New <code><a href="../reference/eval_relocate.html">eval_relocate()</a></code> for moving a selection. This powers <code><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">dplyr::relocate()</a></code> (<a href="https://github.com/r-lib/tidyselect/issues/232" class="external-link">#232</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="lifecycle-changes-1-2-0">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-1-2-0"></a></h3>
<ul><li><p>Using <code><a href="../reference/all_of.html">all_of()</a></code> outside of a tidyselect context is now deprecated (<a href="https://github.com/r-lib/tidyselect/issues/269" class="external-link">#269</a>). In the future it will error to be consistent with <code><a href="../reference/all_of.html">any_of()</a></code>.</p></li>
<li><p>Use of <code>.data</code> in tidyselect expressions is now deprecated to more cleanly separate tidy-select from data-masking. Replace <code>.data$x</code> with <code>"x"</code> and <code>.data[[var]]</code> with <code>all_of(var)</code> (<a href="https://github.com/r-lib/tidyselect/issues/169" class="external-link">#169</a>).</p></li>
<li><p>Use of bare predicates (not wrapped in <code><a href="../reference/where.html">where()</a></code>) and indirection (without using <code><a href="../reference/all_of.html">all_of()</a></code>) have been formally deprecated (<a href="https://github.com/r-lib/tidyselect/issues/317" class="external-link">#317</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-2-0"></a></h3>
<ul><li>
<p>Selection language:</p>
<ul><li><p><code><a href="../reference/all_of.html">any_of()</a></code> generates a more informative error if you supply too many arguments (<a href="https://github.com/r-lib/tidyselect/issues/241" class="external-link">#241</a>).</p></li>
<li><p><code><a href="../reference/all_of.html">all_of()</a></code> (like <code><a href="../reference/all_of.html">any_of()</a></code>) returns an integer vector to make it easier to combine in functions (<a href="https://github.com/r-lib/tidyselect/issues/270" class="external-link">#270</a>, <a href="https://github.com/r-lib/tidyselect/issues/294" class="external-link">#294</a>). It also fails when it can’t find variables even when <code>strict = FALSE</code>.</p></li>
<li><p><code><a href="../reference/starts_with.html">matches()</a></code> recognises and correctly uses stringr pattern objects (<code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">stringr::regex()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">stringr::fixed()</a></code>, etc) (<a href="https://github.com/r-lib/tidyselect/issues/238" class="external-link">#238</a>). It also now works with named vectors (<a href="https://github.com/r-lib/tidyselect/issues/250" class="external-link">#250</a>).</p></li>
<li><p><code><a href="../reference/starts_with.html">num_range()</a></code> gains a <code>suffix</code> argument (<a href="https://github.com/r-lib/tidyselect/issues/229" class="external-link">#229</a>).</p></li>
<li><p><code><a href="../reference/where.html">where()</a></code> is now exported, like all other select helpers (<a href="https://github.com/r-lib/tidyselect/issues/201" class="external-link">#201</a>), and gives more informative errors (<a href="https://github.com/r-lib/tidyselect/issues/236" class="external-link">#236</a>).</p></li>
</ul></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> with <code>include</code> now preserves the order of the variables if they’re present in the selection (<a href="https://github.com/r-lib/tidyselect/issues/224" class="external-link">#224</a>).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> always returns a named vector, even when renaming is not permitted (<a href="https://github.com/r-lib/tidyselect/issues/220" class="external-link">#220</a>).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> and <code><a href="../reference/eval_relocate.html">eval_relocate()</a></code> gain new <code>allow_empty</code> argument which makes it possible to forbid empty selections with <code>allow_empty = FALSE</code> (<a href="https://github.com/r-lib/tidyselect/issues/252" class="external-link">#252</a>).</p></li>
<li><p><code>eval_select(allow_rename = FALSE)</code> no longer fails with empty selections (<a href="https://github.com/r-lib/tidyselect/issues/221" class="external-link">#221</a>, <a href="https://github.com/eutwt" class="external-link">@eutwt</a>) or with predicate functions (<a href="https://github.com/r-lib/tidyselect/issues/225" class="external-link">#225</a>). It now properly fails with partial renaming (<a href="https://github.com/r-lib/tidyselect/issues/305" class="external-link">#305</a>).</p></li>
<li><p><code>peek_var()</code> error now generates hyperlink to docs with recent RStudio (<a href="https://github.com/r-lib/tidyselect/issues/289" class="external-link">#289</a>).</p></li>
<li><p><code><a href="../reference/vars_pull.html">vars_pull()</a></code> generates more informative error messages (<a href="https://github.com/r-lib/tidyselect/issues/234" class="external-link">#234</a>, <a href="https://github.com/r-lib/tidyselect/issues/258" class="external-link">#258</a>, <a href="https://github.com/r-lib/tidyselect/issues/318" class="external-link">#318</a>) and gains <code>error_call</code> and <code>error_arg</code> arguments.</p></li>
<li><p>Errors produced by tidyselect should now be more informative. Evaluation errors are now chained, with the child error call is set to the <code>error_call</code> argument of <code><a href="../reference/eval_select.html">eval_select()</a></code> and <code><a href="../reference/eval_select.html">eval_rename()</a></code>. We’ve also improved backtraces of base errors, and done better at propagating the root <code>error_call</code> to vctrs input checkers.</p></li>
<li><p><code>tidyselect_verbosity</code> is no longer used; deprecation messaging is now controlled by <code>lifecycle_verbosity</code> like all other packages (<a href="https://github.com/r-lib/tidyselect/issues/317" class="external-link">#317</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="tidyselect-112">tidyselect 1.1.2<a class="anchor" aria-label="anchor" href="#tidyselect-112"></a></h2><p class="text-muted">CRAN release: 2022-02-21</p>
<ul><li><p>Fix for CRAN checks.</p></li>
<li><p>Better compatibility with rlang 1.0.0 errors. More to come soon.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="tidyselect-111">tidyselect 1.1.1<a class="anchor" aria-label="anchor" href="#tidyselect-111"></a></h2><p class="text-muted">CRAN release: 2021-04-30</p>
<ul><li><p>Fix for CRAN checks.</p></li>
<li><p>tidyselect has been re-licensed as MIT (<a href="https://github.com/r-lib/tidyselect/issues/217" class="external-link">#217</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="tidyselect-110">tidyselect 1.1.0<a class="anchor" aria-label="anchor" href="#tidyselect-110"></a></h2><p class="text-muted">CRAN release: 2020-05-11</p>
<ul><li>
<p>Predicate functions must now be wrapped with <code><a href="../reference/where.html">where()</a></code>.</p>
<p><code>{r} iris %&gt;% select(where(is.factor))</code></p>
<p>We made this change to avoid puzzling error messages when a variable is unexpectedly missing from the data frame and there is a corresponding function in the environment:</p>
<p><code>{r} # Attempts to invoke `data()` function data.frame(x = 1) %&gt;% select(data)</code></p>
<p>Now tidyselect will correctly complain about a missing variable rather than trying to invoke a function.</p>
<p>For compatibility we will support predicate functions starting with <code>is</code> for 1 version.</p>
</li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code> gains an <code>allow_rename</code> argument. If set to <code>FALSE</code>, renaming variables with the <code>c(foo = bar)</code> syntax is an error. This is useful to implement purely selective behaviour (<a href="https://github.com/r-lib/tidyselect/issues/178" class="external-link">#178</a>).</p></li>
<li><p>Fixed issue preventing repeated deprecation messages when <code>tidyselect_verbosity</code> is set to <code>"verbose"</code> (<a href="https://github.com/r-lib/tidyselect/issues/184" class="external-link">#184</a>).</p></li>
<li><p><code><a href="../reference/all_of.html">any_of()</a></code> now preserves the order of the input variables (<a href="https://github.com/r-lib/tidyselect/issues/186" class="external-link">#186</a>).</p></li>
<li><p>The return value of <code><a href="../reference/eval_select.html">eval_select()</a></code> is now always named, even when inputs are constant (<a href="https://github.com/r-lib/tidyselect/issues/173" class="external-link">#173</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="tidyselect-100">tidyselect 1.0.0<a class="anchor" aria-label="anchor" href="#tidyselect-100"></a></h2><p class="text-muted">CRAN release: 2020-01-27</p>
<p>This is the 1.0.0 release of tidyselect. It features a more solidly defined and implemented syntax, support for predicate functions, new boolean operators, and much more.</p>
<div class="section level3">
<h3 id="documentation-1-0-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-0-0"></a></h3>
<ul><li><p>New Get started vignette for client packages. Read it with <code><a href="../articles/tidyselect.html">vignette("tidyselect")</a></code> or at <a href="https://tidyselect.r-lib.org/articles/tidyselect.html" class="uri">https://tidyselect.r-lib.org/articles/tidyselect.html</a>.</p></li>
<li><p>The definition of the tidyselect language has been consolidated. A technical description is now available: <a href="https://tidyselect.r-lib.org/articles/syntax.html" class="uri">https://tidyselect.r-lib.org/articles/syntax.html</a>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<ul><li>Selecting non-column variables with bare names now triggers an informative message suggesting to use <code><a href="../reference/all_of.html">all_of()</a></code> instead. Referring to contextual objects with a bare name is brittle because it might be masked by a data frame column. Using <code><a href="../reference/all_of.html">all_of()</a></code> is safe (<a href="https://github.com/r-lib/tidyselect/issues/76" class="external-link">#76</a>).</li>
</ul><p>tidyselect now uses vctrs for validating inputs. These changes may reveal programming errors that were previously silent. They may also cause failures if your unit tests make faulty assumptions about the content of error messages created in tidyselect:</p>
<ul><li><p>Out-of-bounds errors are thrown when a name doesn’t exist or a location is too large for the input.</p></li>
<li><p>Logical vectors now fail properly.</p></li>
<li><p>Selected variables now must be unique. It was previously possible to return duplicate selections in some circumstances.</p></li>
<li><p>The input names can no longer contain <code>NA</code> values.</p></li>
</ul><p>Note that we recommend <code><a href="https://testthat.r-lib.org/reference/verify_output.html" class="external-link">testthat::verify_output()</a></code> for monitoring error messages thrown from packages that you don’t control. Unlike <code>expect_error()</code>, <code>verify_output()</code> does not cause CMD check failures when error messages have changed. See <a href="https://www.tidyverse.org/blog/2019/11/testthat-2-3-0/" class="external-link uri">https://www.tidyverse.org/blog/2019/11/testthat-2-3-0/</a> for more information.</p>
</div>
<div class="section level3">
<h3 id="syntax-1-0-0">Syntax<a class="anchor" aria-label="anchor" href="#syntax-1-0-0"></a></h3>
<ul><li>
<p>The boolean operators can now be used to create selections (<a href="https://github.com/r-lib/tidyselect/issues/106" class="external-link">#106</a>).</p>
<ul><li>
<code>!</code> negates a selection.</li>
<li>
<code>|</code> takes the union of two selections.</li>
<li>
<code>&amp;</code> takes the intersection of two selections.</li>
</ul><p>These patterns can currently be achieved using <code>-</code>, <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> and <code><a href="https://rdrr.io/r/base/sets.html" class="external-link">intersect()</a></code> respectively. The boolean operators should be more intuitive to use.</p>
<p>Many thanks to Irene Steves (<a href="https://github.com/isteves" class="external-link">@isteves</a>) for suggesting this UI.</p>
</li>
<li>
<p>You can now use predicate functions in selection contexts:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="va">is.factor</span><span class="op">)</span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="va">is.factor</span> <span class="op">|</span> <span class="va">is.numeric</span><span class="op">)</span></span></code></pre></div>
<p>This feature is not available in functions that use the legacy interface of tidyselect. These need to be updated to use the new <code><a href="../reference/eval_select.html">eval_select()</a></code> function instead of <code><a href="../reference/vars_select.html">vars_select()</a></code>.</p>
</li>
<li><p>Unary <code>-</code> inside nested <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> is now consistently syntax for set difference (<a href="https://github.com/r-lib/tidyselect/issues/130" class="external-link">#130</a>).</p></li>
<li><p>Improved support for named elements. It is now possible to assign the same name to multiple elements, if the input data structure doesn’t require unique names (i.e. anything but a data frame).</p></li>
<li>
<p>The selection engine has been rewritten to support a clearer separation between data-expressions (calls to <code>:</code>, <code>-</code>, and <code>c</code>) and env-expressions (anything else). This means you can now safely use expressions of the type:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">pivot_longer</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Even if the data frame <code>data</code> contains a column also named <code>data</code>, the subexpression <code>ncol(data)</code> is still correctly evaluated. The <code>data:ncol(data)</code> expression is equivalent to <code>2:3</code> because <code>data</code> is looked up in the relevant context without ambiguity:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>foo <span class="op">=</span> <span class="fl">1</span>, data <span class="op">=</span> <span class="fl">2</span>, bar <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">data</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 x 2</span></span>
<span><span class="co">#&gt;    data   bar</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     2     3</span></span></code></pre></div>
<p>While this example above is a bit contrived, there are many realistic cases where these changes make it easier to write safe code:</p>
<p><code>{r} select_from &lt;- function(data, var) {   data %&gt;% dplyr::select({{ var }} : ncol(data)) } data %&gt;% select_from(data) #&gt; # A tibble: 1 x 2 #&gt;    data   bar #&gt;   &lt;dbl&gt; &lt;dbl&gt; #&gt; 1     2     3</code></p>
</li>
</ul></div>
<div class="section level3">
<h3 id="user-facing-improvements-1-0-0">User-facing improvements<a class="anchor" aria-label="anchor" href="#user-facing-improvements-1-0-0"></a></h3>
<ul><li>
<p>The new selection helpers <code><a href="../reference/all_of.html">all_of()</a></code> and <code><a href="../reference/all_of.html">any_of()</a></code> are strict variants of <code><a href="../reference/one_of.html">one_of()</a></code>. The former always fails if some variables are unknown, while the latter does not. <code><a href="../reference/all_of.html">all_of()</a></code> is safer to use when you expect all selected variables to exist. <code><a href="../reference/all_of.html">any_of()</a></code> is useful in other cases, for instance to ensure variables are selected out:</p>
<pre><code><span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span>, <span class="st">"Genus"</span><span class="op">)</span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="../reference/all_of.html">any_of</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Note that <code><a href="../reference/all_of.html">all_of()</a></code> and <code><a href="../reference/all_of.html">any_of()</a></code> are a bit more conservative in their function signature than <code><a href="../reference/one_of.html">one_of()</a></code>: they do not accept dots. The equivalent of <code>one_of("a", "b")</code> is <code>all_of(c("a", "b"))</code>.</p>
</li>
<li>
<p>Selection helpers like <code><a href="../reference/all_of.html">all_of()</a></code> and <code><a href="../reference/starts_with.html">starts_with()</a></code> are now available in all selection contexts, even when they haven’t been attached to the search path. The most visible consequence of this change is that it is now easier to use selection functions without attaching the host package:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># After</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>It is still recommended to export the helpers from your package so that users can easily look up the documentation with <code>?</code>.</p>
</li>
<li>
<p><code><a href="../reference/starts_with.html">starts_with()</a></code>, <code><a href="../reference/starts_with.html">ends_with()</a></code>, <code><a href="../reference/starts_with.html">contains()</a></code>, and <code><a href="../reference/starts_with.html">matches()</a></code> now accept vector inputs (<a href="https://github.com/r-lib/tidyselect/issues/50" class="external-link">#50</a>). For instance these are now equivalent ways of selecting all variables that start with either <code>"a"</code> or <code>"b"</code>:</p>
<p><code>{r} starts_with(c("a", "b")) starts_with("a") | starts_with("b")</code></p>
</li>
<li><p><code><a href="../reference/starts_with.html">matches()</a></code> has new argument <code>perl</code> to allow for Perl-like regular expressions (<a href="https://github.com/fmichonneau" class="external-link">@fmichonneau</a>, <a href="https://github.com/r-lib/tidyselect/issues/71" class="external-link">#71</a>)</p></li>
<li><p>Better support for selecting with S3 vectors. For instance, factors are treated as characters.</p></li>
</ul></div>
<div class="section level3">
<h3 id="api-1-0-0">API<a class="anchor" aria-label="anchor" href="#api-1-0-0"></a></h3>
<p>New <code><a href="../reference/eval_select.html">eval_select()</a></code> and <code><a href="../reference/eval_select.html">eval_rename()</a></code> functions for client packages. These replace <code><a href="../reference/vars_select.html">vars_select()</a></code> and <code><a href="../reference/vars_select.html">vars_rename()</a></code>, which are now deprecated. These functions:</p>
<ul><li><p>Take the full data rather than just names. This makes it possible to use function predicates in selection context.</p></li>
<li><p>Return a numeric vector of locations rather than a vector of names. This makes it possible to use tidyselect with inputs that support duplicate names, like regular vectors.</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-features-and-fixes-1-0-0">Other features and fixes<a class="anchor" aria-label="anchor" href="#other-features-and-fixes-1-0-0"></a></h3>
<ul><li><p>The <code>.strict</code> argument of <code><a href="../reference/vars_select.html">vars_select()</a></code> now works more robustly and consistently.</p></li>
<li><p>Using arithmetic operators in selection context now fails more informatively (<a href="https://github.com/r-lib/tidyselect/issues/84" class="external-link">#84</a>).</p></li>
<li><p>It is now possible to select columns in data frames containing duplicate variables (<a href="https://github.com/r-lib/tidyselect/issues/94" class="external-link">#94</a>). However, the duplicates can’t be part of the final selection.</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_rename()</a></code> no longer ignore the names of unquoted character vectors of length 1 (<a href="https://github.com/r-lib/tidyselect/issues/79" class="external-link">#79</a>).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_rename()</a></code> now fails when a variable is renamed to an existing name (<a href="https://github.com/r-lib/tidyselect/issues/70" class="external-link">#70</a>).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_rename()</a></code> has better support for existing duplicates (but creating new duplicates is an error).</p></li>
<li><p><code><a href="../reference/eval_select.html">eval_select()</a></code>, <code><a href="../reference/eval_select.html">eval_rename()</a></code> and <code><a href="../reference/vars_pull.html">vars_pull()</a></code> now detect missing values uniformly (<a href="https://github.com/r-lib/tidyselect/issues/72" class="external-link">#72</a>).</p></li>
<li><p><code><a href="../reference/vars_pull.html">vars_pull()</a></code> now includes the faulty expression in error messages.</p></li>
<li><p>The performance issues of <code><a href="../reference/eval_select.html">eval_rename()</a></code> with many arguments have been fixed. This make <code><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">dplyr::rename_all()</a></code> with many columns much faster (<a href="https://github.com/zkamvar" class="external-link">@zkamvar</a>, <a href="https://github.com/r-lib/tidyselect/issues/92" class="external-link">#92</a>).</p></li>
<li><p>tidyselect is now much faster with many columns, thanks to a performance fix in <code><a href="https://rlang.r-lib.org/reference/env_bind.html" class="external-link">rlang::env_bind()</a></code> as well as internal fixes.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_select()</a></code> ignores vectors with only zeros (<a href="https://github.com/r-lib/tidyselect/issues/82" class="external-link">#82</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.5" id="tidyselect-025">tidyselect 0.2.5<a class="anchor" aria-label="anchor" href="#tidyselect-025"></a></h2><p class="text-muted">CRAN release: 2018-10-11</p>
<p>This is a maintenance release for compatibility with rlang 0.3.0.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.4" id="tidyselect-024">tidyselect 0.2.4<a class="anchor" aria-label="anchor" href="#tidyselect-024"></a></h2><p class="text-muted">CRAN release: 2018-02-26</p>
<ul><li><p>Fixed a warning that occurred when a vector of column positions was supplied to <code><a href="../reference/vars_select.html">vars_select()</a></code> or functions depending on it such as <code>tidyr::gather()</code> (<a href="https://github.com/r-lib/tidyselect/issues/43" class="external-link">#43</a> and tidyverse/tidyr#374).</p></li>
<li><p>Fixed compatibility issue with rlang 0.2.0 (<a href="https://github.com/r-lib/tidyselect/issues/51" class="external-link">#51</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="tidyselect-023">tidyselect 0.2.3<a class="anchor" aria-label="anchor" href="#tidyselect-023"></a></h2><p class="text-muted">CRAN release: 2017-11-06</p>
<ul><li><p>Internal fixes in prevision of using <code>tidyselect</code> within <code>dplyr</code>.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_select()</a></code> and <code><a href="../reference/vars_select.html">vars_rename()</a></code> now correctly support unquoting character vectors that have names.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_select()</a></code> now ignores missing variables.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="tidyselect-022">tidyselect 0.2.2<a class="anchor" aria-label="anchor" href="#tidyselect-022"></a></h2><p class="text-muted">CRAN release: 2017-10-10</p>
<ul><li>
<code>dplyr</code> is now correctly mentioned as suggested package.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="tidyselect-021">tidyselect 0.2.1<a class="anchor" aria-label="anchor" href="#tidyselect-021"></a></h2><p class="text-muted">CRAN release: 2017-10-09</p>
<ul><li>
<p><code>-</code> now supports character vectors in addition to strings. This makes it easy to unquote column names to exclude from the set:</p>
<p><code>{r} vars &lt;- c("cyl", "am", "disp", "drat") vars_select(names(mtcars), - !!vars)</code></p>
</li>
<li><p><code><a href="../reference/everything.html">last_col()</a></code> now issues an error when the variable vector is empty.</p></li>
<li><p><code><a href="../reference/everything.html">last_col()</a></code> now returns column positions rather than column names for consistency with other helpers. This also makes it compatible with functions like <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code>.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> now supports character vectors the same way as <code>-</code> and <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code>. (<a href="https://github.com/r-lib/tidyselect/issues/37" class="external-link">#37</a> <a href="https://github.com/gergness" class="external-link">@gergness</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="tidyselect-020">tidyselect 0.2.0<a class="anchor" aria-label="anchor" href="#tidyselect-020"></a></h2><p class="text-muted">CRAN release: 2017-08-30</p>
<p>The main point of this release is to revert a troublesome behaviour introduced in tidyselect 0.1.0. It also includes a few features.</p>
<div class="section level3">
<h3 id="evaluation-rules-0-2-0">Evaluation rules<a class="anchor" aria-label="anchor" href="#evaluation-rules-0-2-0"></a></h3>
<p>The special evaluation semantics for selection have been changed back to the old behaviour because the new rules were causing too much trouble and confusion. From now on data expressions (symbols and calls to <code>:</code> and <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>) can refer to both registered variables and to objects from the context.</p>
<p>However the semantics for context expressions (any calls other than to <code>:</code> and <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>) remain the same. Those expressions are evaluated in the context only and cannot refer to registered variables.</p>
<p>If you’re writing functions and refer to contextual objects, it is still a good idea to avoid data expressions. Since registered variables are change as a function of user input and you never know if your local objects might be shadowed by a variable. Consider:</p>
<pre><code><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="fu"><a href="../reference/vars_select.html">vars_select</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span></span></code></pre>
<p>Should that select up to the second element of <code>letters</code> or up to the 14th? Since the variables have precedence in a data expression, this will select the 14 first letters. This can be made more robust by turning the data expression into a context expression:</p>
<pre><code><span><span class="fu"><a href="../reference/vars_select.html">vars_select</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>You can also use quasiquotation since unquoted arguments are guaranteed to be evaluated without any user data in scope. While equivalent because of the special rules for context expressions, this may be clearer to the reader accustomed to tidy eval:</p>
<p><code>{r} vars_select(letters, seq(1, !! n))</code></p>
<p>Finally, you may want to be more explicit in the opposite direction. If you expect a variable to be found in the data but not in the context, you can use the <code>.data</code> pronoun:</p>
<p><code>{r} vars_select(names(mtcars), .data$cyl : .data$drat)</code></p>
</div>
<div class="section level3">
<h3 id="new-features-0-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li><p>The new select helper <code><a href="../reference/everything.html">last_col()</a></code> is helpful to select over a custom range: <code>vars_select(vars, 3:last_col())</code>.</p></li>
<li><p><code>:</code> and <code>-</code> now handle strings as well. This makes it easy to unquote a column name: <code>(!!name) : last_col()</code> or <code>- !!name</code>.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_select()</a></code> gains a <code>.strict</code> argument similar to <code>rename_vars()</code>. If set to <code>FALSE</code>, errors about unknown variables are ignored.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_select()</a></code> now treats <code>NULL</code> as empty inputs. This follows a trend in the tidyverse tools.</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_rename()</a></code> now handles variable positions (integers or round doubles) just like <code><a href="../reference/vars_select.html">vars_select()</a></code> (<a href="https://github.com/r-lib/tidyselect/issues/20" class="external-link">#20</a>).</p></li>
<li><p><code><a href="../reference/vars_select.html">vars_rename()</a></code> is now implemented with the tidy eval framework. Like <code><a href="../reference/vars_select.html">vars_select()</a></code>, expressions are evaluated without any user data in scope. In addition a variable context is now established so you can write rename helpers. Those should return a single round number or a string (variable position or variable name).</p></li>
<li><p><code><a href="../reference/poke_vars.html">has_vars()</a></code> is a predicate that tests whether a variable context has been set (<a href="https://github.com/r-lib/tidyselect/issues/21" class="external-link">#21</a>).</p></li>
<li><p>The selection helpers are now exported in a list <code>vars_select_helpers</code>. This is intended for APIs that embed the helpers in the evaluation environment.</p></li>
</ul></div>
<div class="section level3">
<h3 id="fixes-0-2-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-0-2-0"></a></h3>
<ul><li>
<code><a href="../reference/one_of.html">one_of()</a></code> argument <code>vars</code> has been renamed to <code>.vars</code> to avoid spurious matching.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="tidyselect-011">tidyselect 0.1.1<a class="anchor" aria-label="anchor" href="#tidyselect-011"></a></h2><p class="text-muted">CRAN release: 2017-07-24</p>
<p>tidyselect is the new home for the legacy functions <code><a href="https://dplyr.tidyverse.org/reference/defunct.html" class="external-link">dplyr::select_vars()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/defunct.html" class="external-link">dplyr::rename_vars()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/defunct.html" class="external-link">dplyr::select_var()</a></code>.</p>
<div class="section level3">
<h3 id="api-changes-0-1-1">API changes<a class="anchor" aria-label="anchor" href="#api-changes-0-1-1"></a></h3>
<p>We took this opportunity to make a few changes to the API:</p>
<ul><li><p><code>select_vars()</code> and <code>rename_vars()</code> are now <code><a href="../reference/vars_select.html">vars_select()</a></code> and <code><a href="../reference/vars_select.html">vars_rename()</a></code>. This follows the tidyverse convention that a prefix corresponds to the input type while suffixes indicate the output type. Similarly, <code>select_var()</code> is now <code><a href="../reference/vars_pull.html">vars_pull()</a></code>.</p></li>
<li>
<p>The arguments are now prefixed with dots to limit argument matching issues. While the dots help, it is still a good idea to splice a list of captured quosures to make sure dotted arguments are never matched to <code><a href="../reference/vars_select.html">vars_select()</a></code>’s named arguments:</p>
<pre><code><span><span class="fu"><a href="../reference/vars_select.html">vars_select</a></span><span class="op">(</span><span class="va">vars</span>, <span class="op">!</span><span class="op">!</span><span class="op">!</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</li>
<li><p>Error messages can now be customised. For consistency with dplyr, error messages refer to “columns” by default. This assumes that the variables being selected come from a data frame. If this is not appropriate for your DSL, you can now add an attribute <code>vars_type</code> to the <code>.vars</code> vector to specify alternative names. This must be a character vector of length 2 whose first component is the singular form and the second is the plural. For example, <code>c("variable",   "variables")</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="establishing-a-variable-context-0-1-1">Establishing a variable context<a class="anchor" aria-label="anchor" href="#establishing-a-variable-context-0-1-1"></a></h3>
<p>tidyselect provides a few more ways of establishing a variable context:</p>
<ul><li>
<p><code><a href="../reference/poke_vars.html">scoped_vars()</a></code> sets up a variable context along with an an exit hook that automatically restores the previous variables. It is the preferred way of changing the variable context.</p>
<p><code><a href="../reference/poke_vars.html">with_vars()</a></code> takes variables and an expression and evaluates the latter in the context of the former.</p>
</li>
<li>
<p><code><a href="../reference/poke_vars.html">poke_vars()</a></code> establishes a new variable context. It returns the previous context invisibly and it is your responsibility to restore it after you are done. This is for expert use only.</p>
<p><code>current_vars()</code> has been renamed to <code><a href="../reference/peek_vars.html">peek_vars()</a></code>. This naming is a reference to <a href="https://en.wikipedia.org/wiki/PEEK_and_POKE" class="external-link">peek and poke</a> from legacy languages.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="new-evaluation-semantics-0-1-1">New evaluation semantics<a class="anchor" aria-label="anchor" href="#new-evaluation-semantics-0-1-1"></a></h3>
<p>The evaluation semantics for selecting verbs have changed. Symbols are now evaluated in a data-only context that is isolated from the calling environment. This means that you can no longer refer to local variables unless you are explicitly unquoting these variables with <code>!!</code>, which is mostly for expert use.</p>
<p>Note that since dplyr 0.7, helper calls (like <code><a href="../reference/starts_with.html">starts_with()</a></code>) obey the opposite behaviour and are evaluated in the calling context isolated from the data context. To sum up, symbols can only refer to data frame objects, while helpers can only refer to contextual objects. This differs from usual R evaluation semantics where both the data and the calling environment are in scope (with the former prevailing over the latter).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

